<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.73.0" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-143669536-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    <title>Week 44-48 (November) 2019 :: Packit</title>

    
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css" rel="stylesheet">
    <link href="/css/auto-complete.css" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css" rel="stylesheet">
    <link href="/css/theme.css" rel="stylesheet">
    <link href="/css/hugo-theme.css" rel="stylesheet">
    
      <link href="/css/theme-red.css" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
        :not(pre) > code + span.copy-to-clipboard {
            display: none;
        }
      
    </style>
    
  </head>
  <body class="" data-url="/posts/week-44-48-19/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a href="/"><img src="/packit_logo.png"></a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js"></script>
<script type="text/javascript" src="/js/auto-complete.js"></script>
<script type="text/javascript">
    
        var baseurl = "https:\/\/packit.dev\/";
    
</script>
<script type="text/javascript" src="/js/search.js"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/docs/" title="Documentation" class="dd-item 
        
        
        
        ">
      <a href="/docs/">
          Documentation
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/docs/source-git/" title="Source-git Documentation" class="dd-item 
        
        
        
        ">
      <a href="/docs/source-git/">
          Source-git Documentation
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs/source-git/how-to-source-git/" title="How to source-git?" class="dd-item ">
        <a href="/docs/source-git/how-to-source-git/">
        How to source-git?
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/source-git/work-with-source-git/" title="Working with source-git" class="dd-item ">
        <a href="/docs/source-git/work-with-source-git/">
        Working with source-git
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/source-git/design/" title="Source-git design" class="dd-item ">
        <a href="/docs/source-git/design/">
        Source-git design
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/actions/" title="Actions" class="dd-item ">
        <a href="/docs/actions/">
        Actions
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/architecture/" title="Architecture" class="dd-item ">
        <a href="/docs/architecture/">
        Architecture
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/guide/" title="Packit Guide" class="dd-item ">
        <a href="/docs/guide/">
        Packit Guide
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/configuration/" title="Configuration" class="dd-item ">
        <a href="/docs/configuration/">
        Configuration
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
    <li data-nav-id="/docs/cli/" title="Packit CLI Commands" class="dd-item 
        
        
        
        ">
      <a href="/docs/cli/">
          Packit CLI Commands
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docs/cli/build/" title="build" class="dd-item ">
        <a href="/docs/cli/build/">
        build
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cli/create-bodhi-update/" title="create-bodhi-update" class="dd-item ">
        <a href="/docs/cli/create-bodhi-update/">
        create-bodhi-update
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cli/propose-update/" title="propose-update" class="dd-item ">
        <a href="/docs/cli/propose-update/">
        propose-update
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cli/srpm/" title="srpm" class="dd-item ">
        <a href="/docs/cli/srpm/">
        srpm
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cli/sync-from-downstream/" title="sync-from-downstream" class="dd-item ">
        <a href="/docs/cli/sync-from-downstream/">
        sync-from-downstream
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/docs/cli/copr-build/" title="copr-build" class="dd-item ">
        <a href="/docs/cli/copr-build/">
        copr-build
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/packit-as-a-service/" title="Packit-as-a-Service" class="dd-item 
        
        
        
        ">
      <a href="/packit-as-a-service/">
          Packit-as-a-Service
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/posts/" title="Blog Posts" class="dd-item 
        parent
        
        
        ">
      <a href="/posts/">
          Blog Posts
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/posts/packit-010/" title="Initial version (0.1.0) of packit is out!" class="dd-item ">
        <a href="/posts/packit-010/">
        Initial version (0.1.0) of packit is out!
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/packit-020/" title="Packit 0.2.0 is here!" class="dd-item ">
        <a href="/posts/packit-020/">
        Packit 0.2.0 is here!
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/packit-030/" title="Packit 0.3.0" class="dd-item ">
        <a href="/posts/packit-030/">
        Packit 0.3.0
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/packit-041/" title="Packit 0.4.0 &amp; 0.4.1" class="dd-item ">
        <a href="/posts/packit-041/">
        Packit 0.4.0 &amp; 0.4.1
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/july-2020/" title="July 2020" class="dd-item ">
        <a href="/posts/july-2020/">
        July 2020
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/june-2020/" title="June 2020" class="dd-item ">
        <a href="/posts/june-2020/">
        June 2020
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/may-2020/" title="May 2020" class="dd-item ">
        <a href="/posts/may-2020/">
        May 2020
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/april-2020/" title="April 2020" class="dd-item ">
        <a href="/posts/april-2020/">
        April 2020
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/march-2020/" title="March 2020" class="dd-item ">
        <a href="/posts/march-2020/">
        March 2020
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/february-2020/" title="February 2020" class="dd-item ">
        <a href="/posts/february-2020/">
        February 2020
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/january-20/" title="January 2020" class="dd-item ">
        <a href="/posts/january-20/">
        January 2020
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/december-19/" title="December 19" class="dd-item ">
        <a href="/posts/december-19/">
        December 19
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/week-44-48-19/" title="Week 44-48 (November) 2019" class="dd-item active">
        <a href="/posts/week-44-48-19/">
        Week 44-48 (November) 2019
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/posts/packit-042/" title="Packit 0.4.2" class="dd-item ">
        <a href="/posts/packit-042/">
        Packit 0.4.2
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/testing-farm/" title="Testing Farm" class="dd-item 
        
        
        
        ">
      <a href="/testing-farm/">
          Testing Farm
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/faq/" title="FAQ" class="dd-item 
        
        
        
        ">
      <a href="/faq/">
          FAQ
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    
      <section id="shortcuts">
        <h3>More</h3>
        <ul>
          
              <li> 
                  <a class="padding" href="https://github.com/packit-service/packit"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
              <li> 
                  <a class="padding" href="https://github.com/apps/packit-as-a-service"><i class='fab fa-fw fa-github'></i> Packit-as-a-Service GitHub app</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>About</a> > <a href='/posts/'>Blog Posts</a> > Week 44-48 (November) 2019
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#continuous-deployment-cd">Continuous Deployment (CD)</a></li>
    <li><a href="#changes-in-production-since-the-end-of-november">Changes in production (since the end of November)</a>
      <ul>
        <li><a href="#packit">Packit</a></li>
        <li><a href="#packit-service">Packit Service</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Week 44-48 (November) 2019
            </h1>
          

        



<p>With this blog post we&rsquo;d like to continue with the idea of openly communicating changes in Packit.
Since most of the developers use Packit as the <a href="https://packit.dev/packit-as-a-service">GitHub App</a> (which uses code from <a href="https://github.com/packit-service/packit-service">this repository - Packit Service</a>), this blog will be about changes in all the parts, i.e. the GitHub App, the Packit Service and Packit itself.</p>
<h2 id="continuous-deployment-cd">Continuous Deployment (CD)</h2>
<p>At the moment the workflow is that one of us manually triggers production container image build at the end of a week.
This image is then automatically deployed into our production instance of the service over a weekend (Sun/Mon night) so that everyone can start a week with all the amazing stuff we added the previous week.
In case an issue makes it through our staging instance into production uncaught, we can easily rollback on Monday.
The same person also writes down what&rsquo;s changed in Packit (service/app) since previous deployment.</p>
<h2 id="changes-in-production-since-the-end-of-november">Changes in production (since the end of November)</h2>
<p><a href="/posts/packit-042/">Previous post</a> is almost half a year old so we won&rsquo;t list all the changes since then, but only since last deployment, i.e. since end of December.</p>
<h3 id="packit">Packit</h3>
<p>Previous deployment was running <a href="https://pypi.org/project/packitos/0.7.1/">packit-0.7.1</a>.
We haven&rsquo;t released a newer version since then, but in the service we install Packit from the Git repository (we have a separate <code>stable</code> git branch for our production deployment).
From the most visible changes, Packit now:</p>
<ul>
<li>better handles Create-archive action</li>
<li>is able to work in a repo with detached head</li>
<li>logs output from subprocesses in realtime</li>
<li>syncs config file and spec file by default in Propose-update action</li>
<li>hadles patches with undecodable chars</li>
</ul>
<h3 id="packit-service">Packit Service</h3>
<p>Now:</p>
<ul>
<li>better reports Copr builds
<ul>
<li>uses separate commit status for srpm build and every chroot</li>
<li>clears test farm commit statuses when new build is triggered</li>
<li>better handles failed Copr builds</li>
</ul>
</li>
<li>gracefully handles no config file in the repo</li>
<li>better handles when no (copr build) targets are specified in config file</li>
<li>better checks whitelist of users</li>
<li>does not create duplicate tickets in our <a href="https://github.com/packit-service/notifications">notification repo</a> when a new user install the app</li>
</ul>
<p>Changes not visible to end users:</p>
<ul>
<li>using <a href="https://github.com/packit-service/requre">Requre</a> for integration/E2E tests</li>
<li>Fedora messaging consumer part of the service has been improved and moved to separate <a href="https://github.com/packit-service/packit-service-fedmsg">repo/image</a></li>
<li>using FAS instead of Fedora Badges for checking whether a user is Fedora packager</li>
<li>many improved logs</li>
<li>many bugs squashed</li>
<li>lot&rsquo;s of code refactored</li>
</ul>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/posts/december-19/" title="December 19"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/posts/packit-042/" title="Packit 0.4.2" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/perfect-scrollbar.min.js"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js"></script>
    <script src="/js/jquery.sticky.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>

    <link href="/mermaid/mermaid.css" rel="stylesheet" />
    <script src="/mermaid/mermaid.js"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

